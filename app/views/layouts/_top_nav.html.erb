<% presenter = ::Layouts::TopNavPresenter.new(self) %>

<div id="nav-links__navbar" class="collapse navbar-collapse justify-content-end navbar-link__container">
  <ul class="navbar-nav align-items-lg-center" itemscope="itemscope" itemtype="http://www.schema.org/SiteNavigationElement">
    <% presenter.visible_links.each do |link| %>
      <% if link[:options].present? %>
        <%= render 'layouts/nav_dropdown', dropdown: link %>
      <% else %>
        <%= render 'layouts/nav_link', link: link %>
      <% end %>
    <% end %>

    <% if presenter.more_links.present? %>
      <%= render 'layouts/nav_dropdown', dropdown: presenter.more_links %>
    <% end %>

    <% if current_user.present? %>
      <% if current_founder.present? %>
        <li class="nav-item navbar-nav__nav-item" role="presentation" class="dropdown">
          <a id="navbar-profile-dropdown" class="navbar-profile-dropdown dropdown-toggle logged-in-avatar-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
            <div class="navbar__avatar-wrapper">
              <%= avatar(current_founder.name, founder: current_founder) %>
            </div>
          </a>

          <ul class="dropdown-menu" aria-labelledby="navbar-profile-dropdown">
            <% if policy(current_founder).show? %>
              <li role="presentation">
                <%= link_to student_path(slug: current_founder.slug) do %>
                  <i class="fa fa-list-ul"></i> Profile
                <% end %>
              </li>
            <% end %>

            <li role="presentation">
              <%= link_to destroy_user_session_path, method: :delete do %>
                <i class="fa fa-sign-out"></i> Logout
              <% end %>
            </li>
          </ul>
        </li>
      <% else %>
        <li class="nav-item" role="presentation">
          <%= link_to 'Sign Out', destroy_user_session_path, method: :delete, class: 'btn btn-sm btn-ghost-secondary btn-signin', id: 'sv-navbar__sign-out' %>
        </li>
      <% end %>
    <% else %>
      <li class="nav-item" role="presentation" itemprop="name">
        <%= link_to 'Sign In', new_user_session_path, class: 'btn btn-sm btn-ghost-secondary btn-signin', rel: 'nofollow', itemprop: 'url', id: 'sv-navbar__sign-in' %>
      </li>
    <% end %>
  </ul>
</div>

<% content_for(:tail) do %>
  <%= stylesheet_pack_tag 'MarkdownViewPack', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_pack_tag 'MarkdownViewPack', nonce: true %>
<% end %>
<% presenter = Answers::VersionsPresenter.new(self, @answer) %>
<div class="bg-gray-100 justify-center flex py-4">
  <div class="mb-2 max-w-3xl w-full">
    <div class="border-b pb-3">
      <%= link_to question_path(@answer.question), class: "btn btn-default" do %>
        <i class="far fa-arrow-left"></i>
        <span class="ml-2">Back to Answer</span>
      <% end %>
    </div>
    <div class="flex items-center mt-1">
      <div class="font-bold text-4xl px-4 text-gray-400 "> <%= presenter.version_number_for_answer %></div>
      <div>
        <div class="mt-5 inline-block flex-1 bg-gray-200 border rounded px-2 pb-1 ">
          <span class="text-xs font-semibold text-gray-900">Answer Edit History</span>
        </div>
        <div class="w-full flex flex-col mx-auto relative bg-white border rounded p-5 mt-2">
          <div class="markdown-text" id="<%= presenter.version_number_for_answer %>" data-json-props="<%= presenter.markdown_props_for_answer %>">
            <%= @answer.description %>
          </div>
          <div class="mt-4 text-xs">
            <span>Edited by</span>
            <span class="font-semibold"><%= presenter.editor_name_for_answer %></span>
            <span><%= presenter.updated_at(@answer) %></span>
          </div>
        </div>
      </div>

    </div>
    <% presenter.versions.each_with_index do |version, index| %>
      <div class="flex items-center mt-2">
        <div class="font-bold text-4xl px-4 text-gray-400 "> <%= presenter.version_number(index) %></div>
        <div class=" w-full flex flex-col mx-auto relative bg-orange-100 border border-orange-200 rounded p-5">
          <div id="<%= presenter.version_number(index) %>" data-json-props="<%= presenter.markdown_prop(version, index) %>" class="markdown-text">
            <%= version.value %>
          </div>
          <div class="mt-4 text-xs">
            <span>Edited by</span>
            <span class="font-semibold"><%= presenter.name(version.user) %></span>
            <span><%= presenter.updated_at(version) %></span>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
